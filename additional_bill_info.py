import requests
from bs4 import BeautifulSoup as bs

""" 
–ó–∞–¥–∞—á–∞ –º–æ–¥—É–ª—è - –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–∏—Ç–µ—Ç –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç–∞ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—é —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π Answer –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞.

"""

class billProject():
    def __init__(self, link):

        # —Å–ø–∏—Å–æ–∫ —Ç–æ–≥–æ —á—Ç–æ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç
        my_list = ['–ù–æ–º–µ—Ä, –¥–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó:', '–†–µ–¥–∞–∫—Ü—ñ—è –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç—É:','–†—É–±—Ä–∏–∫–∞ –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç—É:', "–°—É–±'—î–∫—Ç –ø—Ä–∞–≤–∞ –∑–∞–∫–æ–Ω–æ–¥–∞–≤—á–æ—ó —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏:",
                '–ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º—ñ—Ç–µ—Ç:', '–Ü–Ω—ñ—Ü—ñ–∞—Ç–æ—Ä(–∏) –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç—É:']

        # —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ç–∞–±–ª–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–∞–π—Ç–∞ —Ä–∞–¥–∞
        r = requests.get(link)
        soup = bs(r.text, 'html.parser')
        tables = soup.find_all('table')
        info = soup.find_all('div', attrs={'class':'zp-info'})

        # dt - —Å–ø–∏—Å–æ–∫ —Å–ª–µ–≤–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º–∏ –±—É–¥–µ–º –≥–æ–Ω—è—Ç—å –Ω–∞—à –ª—ñ—Å—Ç,  dd - —Å–ø—Ä–∞–≤–∞, —Å–æ –∑–Ω–∞—á–µ–Ω—ñ—è–º—ñ


        dt = info[0].contents[1].find_all('dt')
        dd = info[0].contents[1].find_all('dd')

        # —Ç–∞–∫ –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Å–∞–π—Ç–µ –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤—ñ—Å—ñ–º–æ—Å—Ç—ñ –æ—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω—ñ—è –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç–∞
        # –º–∏ —Ñ–æ—Ä–º—ñ—Ä—É–µ–º —Å–ø—ñ—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–∑—ñ—Ü—ñ–π, –∞ –ø–æ—Ç–æ–º —ñ—â–µ–º –µ–≥–æ —ñ–Ω–¥–µ–∫—Å

        dts = []
        for i in dt:
            dts.append(i.text)
            
            
        try:
            main_committee = f'{dd[dts.index(my_list[4])].text.split("–ö–æ–º—ñ—Ç–µ—Ç")[1]}'
        except:
            main_committee = ''

        subject = dd[dts.index(my_list[3])].text

        deps = []
        for i in dd[dts.index(my_list[5])].find_all('li'):
            deps.append(i.text.split(' (')[0])
            
        chronology = tables[0]

        tr = chronology.find_all('tr')
        date = tr[1].contents[1].text
        status = tr[1].contents[3].text

        self.chronology = f'‚è± –û—Å—Ç–∞–Ω–Ω—è –¥—ñ—è: *{date}* {status}'
        self.committee = f' üëë *–ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º—ñ—Ç–µ—Ç*: {main_committee}'

    